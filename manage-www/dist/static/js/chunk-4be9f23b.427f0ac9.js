(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4be9f23b"],{"0eae":function(e,t,a){"use strict";a.r(t),a("d3b7"),a("96cf");var i={mixins:[a("2ddf").a],data:function(){return{activeTab:"config",loading:!1,total:0,listQuery:{pageNumber:1,contSignDay:"",rewardPoint:""},queryColumns:[{type:"input",prop:"contSignDay",label:"连续签到天数"},{type:"input",prop:"rewardPoint",label:"奖励积分"}],tableColumns:[{type:"selection",width:"55",align:"center"},{label:"连续签到天数",prop:"contSignDay",align:"left",visible:!0,minWidth:"50%"},{label:"奖励积分",prop:"rewardPoint",align:"left",visible:!0,minWidth:"50%"}],data:[{contSignDay:136541,rewardPoint:227447}],checked:[],addVisible:!1,handleType:0,form:{contSignDay:"",rewardPoint:""},formColumns:[{type:"input",label:"连续签到天数",prop:"contSignDay",placeholder:"必填"},{type:"input",label:"奖励积分",prop:"rewardPoint",placeholder:"必填"}]}},created:function(){},methods:{getList:function(){var e,t,a,i;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return this.loading=!0,n.next=3,regeneratorRuntime.awrap(this.$api.leaguelotteryList(this.listQuery));case 3:e=n.sent,t=e.data,a=t.count,i=t.list,this.total=a,this.data=i,this.loading=!1;case 9:case"end":return n.stop()}}),null,this)},handleSearch:function(){},handleAdd:function(){var e=this;this.handleType=0,this.addVisible=!0,this.$nextTick((function(){e.$refs.jsonForm.resetValidate()}))},handleEdit:function(){var e=this;this.handleType=1,this.addVisible=!0,this.$nextTick((function(){e.$refs.jsonForm.resetValidate()}))},handleDel:function(){},sureEdit:function(){}}},n=a("2877"),l=Object(n.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"module-query"},[a("MapQuery",{attrs:{query:e.listQuery,columns:e.queryColumns}}),a("SearchBtn",{attrs:{query:e.listQuery},on:{"update:query":function(t){e.listQuery=t}}})],1),a("div",{staticClass:"module-handle"},[a("div",[a("div",{staticClass:"primary-btn",on:{click:e.handleAdd}},[a("svg-icon",{attrs:{"icon-class":"edit"}}),e._v("增加 ")],1),a("div",{staticClass:"primary-btn",on:{click:function(t){e.checkValidate()&&e.handleEdit()}}},[a("svg-icon",{attrs:{"icon-class":"edit"}}),e._v("编辑 ")],1),a("div",{staticClass:"primary-btn",on:{click:function(t){e.checkValidate()&&e.handleDel()}}},[a("svg-icon",{attrs:{"icon-class":"edit"}}),e._v("删除 ")],1)]),a("ColumnBtn",{attrs:{columns:e.tableColumns},on:{"update:columns":function(t){e.tableColumns=t}}})],1),a("div",{staticClass:"container-wrap"},[a("table-page",{directives:[{name:"loading",rawName:"v-loading.lock",value:e.loading,expression:"loading",modifiers:{lock:!0}}],ref:"paraentTable",attrs:{data:e.data,columns:e.tableColumns,total:e.total,height:"calc(100vh - 300px)",page:e.listQuery.pageNumber},on:{"update:page":function(t){return e.$set(e.listQuery,"pageNumber",t)},"selection-change":function(t){e.checked=t},pagination:e.getList}})],1),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:"优惠活动-"+(e.handleType?"编辑":"新增"),visible:e.addVisible,width:"50%"},on:{"update:visible":function(t){e.addVisible=t}}},[a("div",{staticClass:"module-form-scroll"},[a("el-scrollbar",[a("json-form",{ref:"jsonForm",attrs:{form:e.form,columns:e.formColumns,"label-width":"140px"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"primary-btn small-btn",on:{click:e.sureEdit}},[e._v(" 保存 ")]),a("div",{staticClass:"disabled-btn small-btn",staticStyle:{"margin-left":"16px"},on:{click:function(t){e.addVisible=!1}}},[e._v(" 取消 ")])])])],1)}),[],!1,null,null,null);t.default=l.exports},"1aae":function(e,t,a){"use strict";a.r(t),a("d3b7"),a("96cf");var i=a("c8b4"),n={data:function(){return{loading:!1,total:0,listQuery:{page:1,size:20,name:"",username:"",type:"",status:"",sDate:"",eDate:""},queryColumns:[{type:"input",prop:"name",label:"活动名称"},{type:"input",prop:"username",label:"用户名"},{type:"select",prop:"type",label:"活动类型",options:i.d},{type:"select",prop:"status",label:"完成状态",options:i.a},{type:"date",prop:["sDate","eDate"],label:"发放时间"}],tableColumns:[{label:"活动名称",prop:"name",align:"left",visible:!0,minWidth:"10%"},{label:"用户名",prop:"username",align:"center",visible:!0,minWidth:"10%"},{label:"活动类型",prop:"aType",align:"center",visible:!0,minWidth:"10%",slotName:"actType-column"},{label:"消费流水",prop:"totalConsume",align:"center",visible:!0,minWidth:"10%"},{label:"盈亏",prop:"totalLoss",align:"center",visible:!0,sortable:!0,minWidth:"10%"},{label:"充值金额",prop:"totalRecharge",align:"center",visible:!0,minWidth:"10%"},{label:"活动奖金",prop:"amount",align:"center",visible:!0,minWidth:"10%"},{label:"申请时间",prop:"applyTime",align:"center",visible:!0,minWidth:"12%"},{label:"发放来源",prop:"paySource",align:"center",visible:!0,minWidth:"10%",render:function(e){return 0===e.paySource?"平台":e.paySource}},{label:"完成状态",prop:"status",align:"center",visible:!0,minWidth:"10%",slotName:"status-column"}],data:[]}},mounted:function(){this.getList()},methods:{getList:function(){var e,t,a,i,n;return regeneratorRuntime.async((function(l){for(;;)switch(l.prev=l.next){case 0:return this.loading=!0,e=Object.assign({},this.listQuery,{page:this.listQuery.page-1}),l.next=4,regeneratorRuntime.awrap(this.$api.listActivityRecords(e));case 4:t=l.sent,a=t.data,i=a.totalCount,n=a.list,this.total=i,this.data=n,this.loading=!1;case 10:case"end":return l.stop()}}),null,this)},handleSearch:function(){this.listQuery.page=1,this.getList()}}},l=a("2877"),s=Object(l.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"module-query"},[a("MapQuery",{attrs:{query:e.listQuery,columns:e.queryColumns}}),a("SearchBtn",{attrs:{query:e.listQuery},on:{"update:query":function(t){e.listQuery=t}}})],1),a("div",{staticClass:"module-handle"},[a("div"),a("ColumnBtn",{attrs:{columns:e.tableColumns},on:{"update:columns":function(t){e.tableColumns=t}}})],1),a("div",{staticClass:"container-wrap"},[a("table-page",{directives:[{name:"loading",rawName:"v-loading.lock",value:e.loading,expression:"loading",modifiers:{lock:!0}}],ref:"paraentTable",attrs:{data:e.data,columns:e.tableColumns,total:e.total,height:"calc(100vh - 300px)",page:e.listQuery.page},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},pagination:e.getList},scopedSlots:e._u([{key:"actType-column",fn:function(t){var i=t.row;return[a("div",{staticClass:"tag-aqua"},[e._v(" "+e._s(e._f("formatterActType")(i.atype))+" ")])]}},{key:"status-column",fn:function(t){var i=t.row;return[a("div",{class:e._f("formatterStatusTagClass")(i.status)},[e._v(" "+e._s(e._f("formatterStatus")(i.status))+" ")])]}}])})],1)])}),[],!1,null,null,null);t.default=s.exports},"2d40":function(e,t,a){var i={"./config.vue":"d20e","./memberSignMain.vue":"56fa","./moneyrecord.vue":"1aae","./preferential.vue":"70ee","./signConfig.vue":"0eae","./signRecord.vue":"65c1"};function n(e){var t=l(e);return a(t)}function l(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=l,e.exports=n,n.id="2d40"},"56fa":function(e,t,a){"use strict";a.r(t);var i=a("0eae"),n=a("65c1"),l={components:{signConfig:i.default,signRecord:n.default},data:function(){return{activeModule:"config"}}},s=a("2877"),o=Object(s.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{staticClass:"pt10",staticStyle:{background:"#fff"},attrs:{type:"card"},model:{value:e.activeModule,callback:function(t){e.activeModule=t},expression:"activeModule"}},[a("el-tab-pane",{attrs:{label:"签到设置",name:"config"}}),a("el-tab-pane",{attrs:{label:"签到记录",name:"record"}})],1),a("sign-"+e.activeModule,{tag:"component"})],1)}),[],!1,null,null,null);t.default=o.exports},"65c1":function(e,t,a){"use strict";a.r(t),a("d3b7"),a("96cf");var i={data:function(){var e=this;return{loading:!1,total:0,listQuery:{pageNumber:1,memberName:""},queryColumns:[{type:"input",prop:"memberName",label:"用户名称"}],tableColumns:[{label:"用户名称",prop:"memberName",align:"left",visible:!0,minWidth:"10%"},{label:"连续签到天数",prop:"contSignDay",align:"left",visible:!0,minWidth:"10%"},{label:"奖励积分",prop:"rewardPoint",align:"left",visible:!0,minWidth:"10%"},{label:"签到时间",prop:"lastSignInDate",align:"left",minWidth:"10%",visible:!0,render:function(t){return e.$format(t.lastSignInDate,"yyyy-MM-dd HH:mm:ss")}},{label:"抽奖时间",prop:"lastSignDrawDate",align:"left",minWidth:"10%",visible:!0,render:function(t){return e.$format(t.lastSignDrawDate,"yyyy-MM-dd HH:mm:ss")}}],data:[]}},created:function(){},methods:{getList:function(){var e,t,a,i;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return this.loading=!0,n.next=3,regeneratorRuntime.awrap(this.$api.leaguelotteryList(this.listQuery));case 3:e=n.sent,t=e.data,a=t.count,i=t.list,this.total=a,this.data=i,this.loading=!1;case 9:case"end":return n.stop()}}),null,this)},handleSearch:function(){}}},n=a("2877"),l=Object(n.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"module-query"},[a("MapQuery",{attrs:{query:e.listQuery,columns:e.queryColumns}}),a("SearchBtn",{attrs:{query:e.listQuery},on:{"update:query":function(t){e.listQuery=t}}})],1),a("div",{staticClass:"module-handle"},[a("div"),a("ColumnBtn",{attrs:{columns:e.tableColumns},on:{"update:columns":function(t){e.tableColumns=t}}})],1),a("div",{staticClass:"container-wrap"},[a("table-page",{directives:[{name:"loading",rawName:"v-loading.lock",value:e.loading,expression:"loading",modifiers:{lock:!0}}],ref:"paraentTable",attrs:{data:e.data,columns:e.tableColumns,total:e.total,height:"calc(100vh - 300px)",page:e.listQuery.pageNumber},on:{"update:page":function(t){return e.$set(e.listQuery,"pageNumber",t)},pagination:e.getList}})],1)])}),[],!1,null,null,null);t.default=l.exports},"70ee":function(e,t,a){"use strict";a.r(t),a("d3b7"),a("96cf");var i=a("2ddf"),n=a("c8b4"),l=a("6625"),s={components:{VueUeditorWrap:a.n(l).a},mixins:[i.a],data:function(){var e=this;return{loading:!1,total:0,listQuery:{pageNumber:1,activityName:"",beginTime:"",endTime:"",activityType:"",publishFlag:""},queryColumns:[{type:"input",prop:"activityName",label:"活动名称"},{type:"date",prop:["beginTime","endTime"],label:"创建时间"},{type:"select",prop:"activityType",label:"活动范围",options:n.e},{type:"select",prop:"publishFlag",label:"状态",options:n.g}],myConfig:{UEDITOR_HOME_URL:"/UEditor/",autoHeightEnabled:!1,initialFrameHeight:300,initialFrameWidth:"100%",elementPathEnabled:!1,wordCount:!1,zIndex:3e3},tableColumns:[{type:"selection",width:"55",align:"center"},{label:"标题",prop:"activityName",align:"left",visible:!0,minWidth:"10%"},{label:"活动范围",prop:"activityType",align:"center",visible:!0,minWidth:"10%",slotName:"activityType-column"},{label:"活动图片",prop:"imgPath",align:"center",visible:!0,minWidth:"10%"},{label:"统计类型",prop:"thirdType",align:"center",visible:!0,minWidth:"10%",slotName:"thirdType-column"},{label:"app端活动图片",prop:"imgPathApp",align:"center",visible:!0,minWidth:"10%"},{label:"创建用户",prop:"createUser",align:"center",visible:!0,minWidth:"10%"},{label:"创建日期",prop:"createDate",align:"center",visible:!0,minWidth:"10%",render:function(t){return e.$format(t.createDate,"yyyy-MM-dd HH:mm:ss")}},{label:"需要申请",prop:"applyFlag",align:"center",visible:!0,minWidth:"10%",slotName:"applyFlag-column"},{label:"状态",prop:"publishFlag",align:"center",visible:!0,minWidth:"10%",slotName:"publishFlag-column"}],data:[],checked:[],addVisible:!1,handleType:0,form:{activityName:"",activityType:9,imgPath:"",thirdType:1,imgPathApp:"",applyFlag:0,actId:"",publishFlag:1,topFlag:-1,content:"",remark:""},formColumns:[{type:"input",label:"标题",prop:"activityName",placeholder:"必填"},{type:"select",label:"活动范围",prop:"activityType",options:n.e},{label:"活动图片",prop:"imgPath",slotName:"imgPath-column"},{type:"select",label:"统计类型",prop:"thirdType",options:n.i},{label:"app端活动图片",prop:"imgPathApp",slotName:"imgPathApp-column"},{type:"select",label:"需要申请",prop:"applyFlag",options:n.f},{type:"select",label:"绑定活动",prop:"actId",placeholder:"无",options:n.b},{type:"select",label:"是否发布",prop:"publishFlag",options:n.h},{type:"select",label:"是否置顶",prop:"topFlag",options:n.j},{type:"handle",label:"内容",prop:"content",slotName:"content-column"},{type:"handle",label:"备注",prop:"remark",slotName:"remark-column"}]}},created:function(){},methods:{getList:function(){var e,t,a,i;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return this.loading=!0,n.next=3,regeneratorRuntime.awrap(this.$api.leaguelotteryList(this.listQuery));case 3:e=n.sent,t=e.data,a=t.count,i=t.list,this.total=a,this.data=i,this.loading=!1;case 9:case"end":return n.stop()}}),null,this)},handleSearch:function(){},handleAdd:function(){var e=this;this.handleType=0,this.addVisible=!0,this.$nextTick((function(){e.$refs.jsonForm.resetValidate()}))},handleEdit:function(){var e=this;this.handleType=1,this.addVisible=!0,this.$nextTick((function(){e.$refs.jsonForm.resetValidate()}))},handlePublish:function(){},handleCancel:function(){},handleDel:function(){},sureEdit:function(){}}},o=a("2877"),r=Object(o.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"module-query"},[a("MapQuery",{attrs:{query:e.listQuery,columns:e.queryColumns}}),a("SearchBtn",{attrs:{query:e.listQuery},on:{"update:query":function(t){e.listQuery=t}}})],1),a("div",{staticClass:"module-handle"},[a("div",[a("div",{staticClass:"primary-btn",on:{click:function(t){return e.handleAdd()}}},[a("svg-icon",{attrs:{"icon-class":"edit"}}),e._v("增加 ")],1),a("div",{staticClass:"primary-btn",on:{click:function(t){e.checkValidate()&&e.handleEdit()}}},[a("svg-icon",{attrs:{"icon-class":"edit"}}),e._v("编辑 ")],1),a("div",{staticClass:"primary-btn",on:{click:function(t){e.checkValidate()&&e.handlePublish()}}},[a("svg-icon",{attrs:{"icon-class":"edit"}}),e._v("发布 ")],1),a("div",{staticClass:"primary-btn",on:{click:function(t){e.checkValidate()&&e.handleCancel()}}},[a("svg-icon",{attrs:{"icon-class":"edit"}}),e._v("取消发布 ")],1),a("div",{staticClass:"primary-btn",on:{click:function(t){e.checkValidate()&&e.handleDel()}}},[a("svg-icon",{attrs:{"icon-class":"edit"}}),e._v("删除 ")],1)]),a("ColumnBtn",{attrs:{columns:e.tableColumns},on:{"update:columns":function(t){e.tableColumns=t}}})],1),a("div",{staticClass:"container-wrap"},[a("table-page",{directives:[{name:"loading",rawName:"v-loading.lock",value:e.loading,expression:"loading",modifiers:{lock:!0}}],ref:"paraentTable",attrs:{data:e.data,columns:e.tableColumns,total:e.total,height:"calc(100vh - 300px)",page:e.listQuery.pageNumber},on:{"update:page":function(t){return e.$set(e.listQuery,"pageNumber",t)},"selection-change":function(t){e.checked=t},pagination:e.getList},scopedSlots:e._u([{key:"activityType-column",fn:function(t){var i=t.row;return[a("div",{staticClass:"tag-aqua"},[e._v(" "+e._s(e._f("formatterActivityType")(i.activityType))+" ")])]}},{key:"thirdType-column",fn:function(t){var i=t.row;return[a("div",{class:e._f("formatterPlatformTypeTagClass")(i.thirdType)},[e._v(" "+e._s(e._f("formatterPlatformType")(i.thirdType))+" ")])]}},{key:"applyFlag-column",fn:function(t){var i=t.row;return[a("div",{class:["tag-aqua","tag-green"][i.applyFlag]},[e._v(" "+e._s(e._f("formatterApplyFlag")(i.applyFlag))+" ")])]}},{key:"publishFlag-column",fn:function(t){var i=t.row;return[a("div",{class:["tag-orange","tag-green"][i.memberType+1]},[e._v(" "+e._s(e._f("formatterPlushType")(i.publishFlag))+" ")])]}}])})],1),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:"优惠活动-"+(e.handleType?"编辑":"新增"),visible:e.addVisible,width:"50%"},on:{"update:visible":function(t){e.addVisible=t}}},[a("div",{staticClass:"module-form-scroll"},[a("el-scrollbar",[a("json-form",{ref:"jsonForm",attrs:{form:e.form,columns:e.formColumns,"label-width":"140px"},scopedSlots:e._u([{key:"content-column",fn:function(t){var i=t.formData,n=t.item;return[a("div",{staticClass:"form-handle-slot"},[a("div",{staticClass:"form-handle-slot-title mb4"},[e._v(" 内容 ")]),a("VueUeditorWrap",{attrs:{config:e.myConfig},model:{value:i[n.prop],callback:function(t){e.$set(i,n.prop,t)},expression:"formData[item.prop]"}})],1)]}},{key:"remark-column",fn:function(t){var i=t.formData,n=t.item;return[a("div",{staticClass:"form-handle-slot"},[a("div",{staticClass:"form-handle-slot-title mb4"},[e._v(" 备注 ")]),a("el-input",{attrs:{type:"textarea",rows:6},model:{value:i[n.prop],callback:function(t){e.$set(i,n.prop,"string"==typeof t?t.trim():t)},expression:"formData[item.prop]"}})],1)]}}])},[a("template",{slot:"imgPath-column"},[a("el-upload",{attrs:{action:"/file/avatar","show-file-list":!1}},[a("div",{staticClass:"upload-btn"},[a("svg-icon",{attrs:{"icon-class":"add"}}),e._v("上传图片 ")],1)]),a("span",[e._v("建议尺寸：1920*580 支持jpg、png、jpeg格式")])],1),a("template",{slot:"imgPathApp-column"},[a("el-upload",{attrs:{action:"/file/avatar","show-file-list":!1}},[a("div",{staticClass:"upload-btn"},[a("svg-icon",{attrs:{"icon-class":"add"}}),e._v("上传图片 ")],1)]),a("span",[e._v("建议尺寸：370*190 支持jpg、png、jpeg格式")])],1)],2)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"primary-btn small-btn",on:{click:e.sureEdit}},[e._v(" 保存 ")]),a("div",{staticClass:"disabled-btn small-btn",staticStyle:{"margin-left":"16px"},on:{click:function(t){e.addVisible=!1}}},[e._v(" 取消 ")])])])],1)}),[],!1,null,null,null);t.default=r.exports},"866f":function(e,t,a){"use strict";var i=a("be57");a.n(i).a},be57:function(e,t,a){},c8b4:function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"g",(function(){return n})),a.d(t,"h",(function(){return l})),a.d(t,"j",(function(){return s})),a.d(t,"i",(function(){return o})),a.d(t,"f",(function(){return r})),a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return u})),a.d(t,"c",(function(){return d})),a.d(t,"a",(function(){return p}));var i=[{value:0,label:"官会活动"},{value:1,label:"通用代理"},{value:2,label:"专用代理"},{value:9,label:"通用活动"}],n=[{value:-1,label:"未发布"},{value:1,label:"已发布"}],l=[{value:-1,label:"不发布"},{value:1,label:"发布"}],s=[{value:-1,label:"非置顶"},{value:1,label:"置顶"}],o=[{value:1,label:"真人"},{value:2,label:"电子"},{value:3,label:"彩票"},{value:4,label:"体育"},{value:5,label:"棋牌"},{value:6,label:"其他"}],r=[{value:0,label:"自动参与"},{value:1,label:"需要申请"}],c=[{value:16,label:" 股东日亏损佣金"},{value:15,label:" 老板日亏损金额的1%佣金"},{value:14,label:"特权号日0.05%消费流水"}],u=[{value:"a1",label:"首次充值送"},{value:"a2",label:"充值送"},{value:"a3",label:"消费送"},{value:"a4",label:"佣金"},{value:"a5",label:"注册送"},{value:"a6",label:"签到送"},{value:"a7",label:"签到抽奖"},{value:"a8",label:"三级亏损佣金"},{value:"a9",label:"幸运抽奖"}],d=[{value:0,label:" 启用"},{value:1,label:" 停用"}],p=[{value:0,label:" 待确认"},{value:1,label:" 未发放"},{value:2,label:" 已完成"},{value:-1,label:" 取消"}]},cd1c:function(e,t,a){"use strict";a.r(t),a("a4d3"),a("4de4"),a("4160"),a("e439"),a("dbb4"),a("b64b"),a("159b");var i=a("2fa7"),n=a("e6b9"),l=(a("13d5"),a("d3b7"),a("ac1f"),a("5319"),a("ddb0"),a("2d40")),s=l.keys().reduce((function(e,t){var a=t.replace(/^\.\/(.*)\.\w+$/,"$1"),i=l(t).default;return e[a]=i,e}),{});function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}var r={components:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({moduleTags:n.a},s),data:function(){return{active:"config",tags:[{label:"活动设置",value:"config"},{label:"活动奖金记录",value:"moneyrecord"}]}}},c=a("2877"),u=Object(c.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("moduleTags",{attrs:{tags:e.tags,active:e.active},on:{"update:active":function(t){e.active=t}}}),a(e.active,{tag:"component"})],1)}),[],!1,null,null,null);t.default=u.exports},d20e:function(e,t,a){"use strict";a.r(t),a("a15b"),a("d81d"),a("b0c0"),a("d3b7");var i=a("dfdf"),n=(a("96cf"),a("2ddf")),l=a("c8b4"),s={mixins:[n.a],data:function(){return{loading:!1,total:0,listQuery:{page:1,size:20,name:"",type:""},queryColumns:[{type:"input",prop:"name",label:"活动名称"},{type:"select",prop:"type",label:"活动类型",options:l.d}],actType:l.d,tableColumns:[{type:"selection",width:"55",align:"center"},{label:"活动名称",prop:"name",align:"left",minWidth:"10%",visible:!0},{label:"类型",prop:"aType",align:"center",visible:!0,minWidth:"6%",slotName:"actType-column"},{label:"活动规则",prop:"content",align:"center",visible:!0,minWidth:"10%",render:function(e){return JSON.parse(e.content).map((function(e){return e.join()})).join(" | ")}},{label:"状态",prop:"status",align:"center",visible:!0,minWidth:"6%",slotName:"actStatus-column"},{label:"开始时间",prop:"beginTime",align:"center",visible:!0,minWidth:"10%"},{label:"结束时间",prop:"endTime",align:"center",visible:!0,minWidth:"10%"}],data:[],checked:[],addVisible:!1,handleType:0,form:{id:-1,name:"",aType:"a9",status:0,beginTime:[],actRules:[{depositMoney:"",proportionDiscount:"",singleDiscountMax:"",fixedDiscount:"",flowMultiple:""}]},formColumns:[{type:"input",label:"活动名称",prop:"name",placeholder:"必填"},{type:"select",label:"类型",prop:"aType",options:l.d},{type:"select",label:"是否发布",prop:"status",options:l.c},{type:"daterange",label:"时间周期",prop:"beginTime"},{type:"handle",label:"添加",slotName:"add-column"},{label:"活动规则",prop:"actRules",slotName:"actRules-column"}],formTableColumns:[{label:"存款金额",prop:"depositMoney",align:"left",minWidth:"20%",visible:!0,slotName:"depositMoney-column"},{label:"比例优惠(10%请输0.1)",prop:"proportionDiscount",align:"left",minWidth:"20%",visible:!0,slotName:"proportionDiscount-column"},{label:"单笔优惠上限",prop:"singleDiscountMax",align:"left",minWidth:"20%",visible:!0,slotName:"singleDiscountMax-column"},{label:"固定优惠",prop:"fixedDiscount",align:"left",minWidth:"20%",visible:!0,slotName:"fixedDiscount-column"},{label:"流水倍数(不含彩票)",prop:"flowMultiple",align:"left",minWidth:"20%",visible:!0,slotName:"flowMultiple-column"}]}},created:function(){this.getList()},methods:{getList:function(){var e,t,a,i,n;return regeneratorRuntime.async((function(l){for(;;)switch(l.prev=l.next){case 0:return this.loading=!0,e=Object.assign({},this.listQuery,{page:this.listQuery.page-1}),l.next=4,regeneratorRuntime.awrap(this.$api.listActivityConf(e));case 4:t=l.sent,a=t.data,i=a.totalCount,n=a.list,this.total=i,this.data=n,this.loading=!1;case 10:case"end":return l.stop()}}),null,this)},handleSearch:function(){this.listQuery.page=1,this.getList()},handleAdd:function(){var e=this;this.handleType=0,this.addVisible=!0,this.$nextTick((function(){e.form=e.$options.data().form}))},handleEdit:function(){var e=this;this.handleType=1,this.addVisible=!0,this.$nextTick((function(){e.$refs.jsonForm.clearValidate(),e.form.id=e.checked[0].id,e.form.name=e.checked[0].name,e.form.aType=e.checked[0].aType,e.form.status=e.checked[0].status,e.form.beginTime=[e.checked[0].beginTime,e.checked[0].endTime],e.form.actRules=JSON.parse(e.checked[0].content).map((function(e){return{depositMoney:e[0],proportionDiscount:e[1],singleDiscountMax:e[2],fixedDiscount:e[3],flowMultiple:e[4]}}))}))},handleRun:function(e){var t,a,n,l;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(this.checked[0].status!==e){s.next=2;break}return s.abrupt("return",!1);case 2:return t=this.checked[0],t.status,a=t.content,(n=Object(i.a)(t,["status","content"])).status=1-this.checked[0].status,n.content=JSON.parse(a),s.next=7,regeneratorRuntime.awrap(this.$api.saveActivity({content:JSON.stringify(n)}));case 7:l=s.sent,!l.error&&this.$message.success("提交成功"),this.getList();case 11:case"end":return s.stop()}}),null,this)},sureEdit:function(){var e,t,a,n,l;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=this.form,t=e.beginTime,a=e.actRules,(n=Object(i.a)(e,["beginTime","actRules"])).beginTime=t[0],n.endTime=t[1],n.content=a.map((function(e){return[e.depositMoney,e.proportionDiscount-0,e.singleDiscountMax,e.fixedDiscount,e.flowMultiple]})),s.next=6,regeneratorRuntime.awrap(this.$api.saveActivity({content:JSON.stringify(n)}));case 6:l=s.sent,!l.error&&this.$message.success("提交成功"),this.getList(),this.addVisible=!1;case 11:case"end":return s.stop()}}),null,this)},addItem:function(){this.form.actRules.push({depositMoney:"",proportionDiscount:"",singleDiscountMax:"",fixedDiscount:"",flowMultiple:""})}}},o=a("2877"),r=Object(o.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"module-query"},[a("MapQuery",{attrs:{query:e.listQuery,columns:e.queryColumns}}),a("SearchBtn",{attrs:{query:e.listQuery},on:{"update:query":function(t){e.listQuery=t}}})],1),a("div",{staticClass:"module-handle"},[a("div",[a("div",{staticClass:"primary-btn",on:{click:function(t){return e.handleAdd()}}},[a("svg-icon",{attrs:{"icon-class":"edit"}}),e._v("增加 ")],1),a("div",{staticClass:"primary-btn",on:{click:function(t){e.checkValidate()&&e.handleEdit()}}},[a("svg-icon",{attrs:{"icon-class":"edit"}}),e._v("编辑 ")],1),a("div",{staticClass:"primary-btn",on:{click:function(t){e.checkValidate()&&e.handleRun(0)}}},[a("svg-icon",{attrs:{"icon-class":"edit"}}),e._v("启用 ")],1),a("div",{staticClass:"primary-btn",on:{click:function(t){e.checkValidate()&&e.handleRun(1)}}},[a("svg-icon",{attrs:{"icon-class":"edit"}}),e._v("停用 ")],1),a("div",{directives:[{name:"permission",rawName:"v-permission:3",value:{fn:e.handleRemove,args:"delActivity",validate:e.checkValidate},expression:"{ fn: handleRemove, args: 'delActivity', validate: checkValidate }",arg:"3"}],staticClass:"primary-btn"},[a("svg-icon",{attrs:{"icon-class":"check-square"}}),e._v("删除 ")],1)]),a("ColumnBtn",{attrs:{columns:e.tableColumns},on:{"update:columns":function(t){e.tableColumns=t}}})],1),a("div",{staticClass:"container-wrap"},[a("table-page",{directives:[{name:"loading",rawName:"v-loading.lock",value:e.loading,expression:"loading",modifiers:{lock:!0}}],ref:"paraentTable",attrs:{data:e.data,columns:e.tableColumns,total:e.total,height:"calc(100vh - 300px)",page:e.listQuery.page},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"selection-change":function(t){e.checked=t},pagination:e.getList},scopedSlots:e._u([{key:"actType-column",fn:function(t){var i=t.row;return[a("div",{staticClass:"tag-aqua"},[e._v(" "+e._s(e._f("formatterActType")(i.aType))+" ")])]}},{key:"actStatus-column",fn:function(t){var i=t.row;return[a("div",{staticClass:"tag-aqua"},[e._v(" "+e._s(e._f("formatterPlushType")(i.status))+" ")])]}}])})],1),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:"活动配置-"+(e.handleType?"编辑":"新增"),visible:e.addVisible,width:"66%"},on:{"update:visible":function(t){e.addVisible=t}}},[a("div",{staticClass:"module-form-scroll"},[a("el-scrollbar",[a("json-form",{ref:"jsonForm",attrs:{form:e.form,columns:e.formColumns,"label-width":"140px"},scopedSlots:e._u([{key:"actRules-column",fn:function(t){var i=t.formData,n=t.item;return[a("table-page",{attrs:{data:i[n.prop],columns:e.formTableColumns,"hidden-pagination":!0},scopedSlots:e._u([{key:"depositMoney-column",fn:function(t){var i=t.row;return[a("el-input",{attrs:{"auto-complete":"off"},model:{value:i.depositMoney,callback:function(t){e.$set(i,"depositMoney",e._n(t))},expression:"row.depositMoney"}})]}},{key:"proportionDiscount-column",fn:function(t){var i=t.row;return[a("el-input",{attrs:{"auto-complete":"off"},model:{value:i.proportionDiscount,callback:function(t){e.$set(i,"proportionDiscount",t)},expression:"row.proportionDiscount"}})]}},{key:"singleDiscountMax-column",fn:function(t){var i=t.row;return[a("el-input",{attrs:{"auto-complete":"off"},model:{value:i.singleDiscountMax,callback:function(t){e.$set(i,"singleDiscountMax",e._n(t))},expression:"row.singleDiscountMax"}})]}},{key:"fixedDiscount-column",fn:function(t){var i=t.row;return[a("el-input",{attrs:{"auto-complete":"off"},model:{value:i.fixedDiscount,callback:function(t){e.$set(i,"fixedDiscount",e._n(t))},expression:"row.fixedDiscount"}})]}},{key:"flowMultiple-column",fn:function(t){var i=t.row;return[a("el-input",{attrs:{"auto-complete":"off"},model:{value:i.flowMultiple,callback:function(t){e.$set(i,"flowMultiple",e._n(t))},expression:"row.flowMultiple"}})]}}],null,!0)})]}}])},[a("template",{slot:"add-column"},[a("div",{staticClass:"fr mb10"},[a("div",{staticClass:"primary-btn",on:{click:e.addItem}},[e._v(" 添加 ")])])])],2)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"primary-btn small-btn",on:{click:e.sureEdit}},[e._v(" 保存 ")]),a("div",{staticClass:"disabled-btn small-btn",staticStyle:{"margin-left":"16px"},on:{click:function(t){e.addVisible=!1}}},[e._v(" 取消 ")])])])],1)}),[],!1,null,null,null);t.default=r.exports},e6b9:function(e,t,a){"use strict";var i={props:{tags:{type:Array,default:function(e){return[]}},active:{type:String,default:""}},computed:{currentTag:{get:function(){return this.active},set:function(e){this.$emit("update:active",e)}}}},n=(a("866f"),a("2877")),l=Object(n.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tags-view-container",attrs:{id:"tags-view-container"}},e._l(e.tags,(function(t){return a("span",{key:t.value,staticClass:"tags-view-item",class:{active:e.currentTag===t.value},on:{click:function(a){e.currentTag=t.value}}},[e._v(" "+e._s(t.label)+" ")])})),0)}),[],!1,null,"bff73f1c",null);t.a=l.exports}}]);