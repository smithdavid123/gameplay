(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0c808f36"],{"5c99":function(e,t,a){"use strict";a.r(t),a("4160"),a("b64b"),a("d3b7"),a("159b"),a("96cf");var i=[{value:1,label:"已发布"},{value:-1,label:"未发布"}],n=a("6625"),r=a.n(n),s=a("2ddf"),l={components:{VueUeditorWrap:r.a},mixins:[s.a],data:function(){return{loading:!1,total:0,listQuery:{pageNumber:1,title:"",publishFlag:""},queryColumns:[{type:"input",prop:"title",label:"公告标题"},{type:"select",prop:"publishFlag",label:"发布状态",allName:"请选择",options:i}],myConfig:{UEDITOR_HOME_URL:"/UEditor/",autoHeightEnabled:!1,initialFrameHeight:300,initialFrameWidth:"100%",elementPathEnabled:!1,wordCount:!1,zIndex:3e3},tableColumns:[{type:"selection",width:"55",align:"center"},{label:"公告标题",prop:"title",align:"left",valign:"middle",minWidth:"20%",visible:!0},{label:"公告类型",prop:"power",align:"left",valign:"middle",minWidth:"8%",visible:!0,slotName:"power-column"},{label:"发布状态",prop:"status",align:"center",valign:"middle",minWidth:"8%",visible:!0,slotName:"status-column"},{label:"显示顺序",prop:"showOrder",align:"center",valign:"middle",minWidth:"5%",visible:!0},{label:"创建用户",prop:"username",align:"center",valign:"middle",minWidth:"8%",visible:!0},{label:"操作时间",prop:"time",align:"center",valign:"middle",minWidth:"10%",visible:!0}],data:[],checked:[],handleType:0,addVisible:!1,form:{id:-1,title:"",power:0,showOrder:"",content:"",status:0},formColumns:[{type:"input",label:"公告标题",prop:"title",placeholder:"必填",rules:[{required:!0,message:"请填写公告标题",trigger:"blur"}]},{type:"radio",label:"通告类型",prop:"power",options:[{label:"官方公告",value:0},{label:"代理公告",value:1},{label:"专用代理",value:2},{label:"通用公告",value:9}]},{type:"input",label:"显示顺序",prop:"showOrder"},{type:"handle",label:"内容",prop:"content",slotName:"content-column"}],removeVisible:!1}},created:function(){this.getList()},methods:{getList:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,regeneratorRuntime.awrap(this.$api.noticeList(this.listQuery));case 3:e=t.sent,this.total=e.length,this.data=e,this.loading=!1;case 7:case"end":return t.stop()}}),null,this)},handleSearch:function(){},handleAdd:function(){var e=this;this.handleType=0,this.addVisible=!0,this.$nextTick((function(){e.form=e.$options.data().form}))},handleEdit:function(){var e=this;this.handleType=1,this.addVisible=!0,this.$nextTick((function(){e.$refs.jsonForm.clearValidate(),Object.keys(e.form).forEach((function(t){e.form[t]=e.checked[0][t]}))}))},sureAdd:function(){var e=this;this.$refs.jsonForm.validate((function(t){var a;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(e.$api.addNotice(e.form));case 2:a=t.sent,!a.error&&e.$message.success("提交成功"),e.getList(),e.addVisible=!1;case 7:case"end":return t.stop()}}))}))},sureRemove:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$api.delNotice({id:this.checked[0].id}));case 2:e=t.sent,!e.error&&this.$message.success("删除成功"),this.getList(),this.removeVisible=!1;case 7:case"end":return t.stop()}}),null,this)},upOrDown:function(e){var t,a;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(this.checked[0].status!==e){i.next=2;break}return i.abrupt("return",!1);case 2:return t={id:this.checked[0].id,key:"status",value:1-this.checked[0].status},i.next=5,regeneratorRuntime.awrap(this.$api.updateStatue(t));case 5:a=i.sent,!a.error&&this.$message.success("提交成功"),this.getList();case 9:case"end":return i.stop()}}),null,this)}}},o=a("2877"),c=Object(o.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"module-query"},[a("MapQuery",{attrs:{query:e.listQuery,columns:e.queryColumns}}),a("SearchBtn",{attrs:{query:e.listQuery},on:{"update:query":function(t){e.listQuery=t}}})],1),a("div",{staticClass:"module-handle"},[a("div",[a("div",{staticClass:"primary-btn",on:{click:function(t){return e.handleAdd()}}},[a("svg-icon",{attrs:{"icon-class":"check-square"}}),e._v("增加 ")],1),a("div",{staticClass:"primary-btn",on:{click:function(t){e.checkValidate()&&e.handleEdit()}}},[a("svg-icon",{attrs:{"icon-class":"check-square"}}),e._v("编辑 ")],1),a("div",{staticClass:"primary-btn",on:{click:function(t){e.checkValidate()&&e.upOrDown(0)}}},[a("svg-icon",{attrs:{"icon-class":"check-square"}}),e._v("发布 ")],1),a("div",{staticClass:"primary-btn",on:{click:function(t){e.checkValidate()&&e.upOrDown(1)}}},[a("svg-icon",{attrs:{"icon-class":"check-square"}}),e._v("取消发布 ")],1),a("div",{staticClass:"primary-btn",on:{click:function(t){e.checkValidate()&&(e.removeVisible=!0)}}},[a("svg-icon",{attrs:{"icon-class":"check-square"}}),e._v("删除 ")],1)]),a("ColumnBtn",{attrs:{columns:e.tableColumns},on:{"update:columns":function(t){e.tableColumns=t}}})],1),a("div",{staticClass:"container-wrap"},[a("table-page",{directives:[{name:"loading",rawName:"v-loading.lock",value:e.loading,expression:"loading",modifiers:{lock:!0}}],ref:"paraentTable",attrs:{data:e.data,columns:e.tableColumns,total:e.total,height:"calc(100vh - 300px)",page:e.listQuery.pageNumber},on:{"update:page":function(t){return e.$set(e.listQuery,"pageNumber",t)},pagination:e.getList,"selection-change":function(t){e.checked=t}},scopedSlots:e._u([{key:"status-column",fn:function(t){var i=t.row;return[a("div",{class:[i.status>0?"tag-red":"tag-blue"]},[e._v(" "+e._s(i.status>0?"停用":"启用")+" ")])]}},{key:"power-column",fn:function(t){var i=t.row;return[a("div",{staticClass:"tag-green"},[e._v(" "+e._s(e._f("formatterNoticeType")(i.power))+" ")])]}}])})],1),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:"系统公告-"+(e.handleType?"编辑":"新增"),visible:e.addVisible,width:"50%"},on:{"update:visible":function(t){e.addVisible=t}}},[a("div",{staticClass:"module-form-scroll"},[a("el-scrollbar",[a("json-form",{ref:"jsonForm",attrs:{form:e.form,columns:e.formColumns,"label-width":"100px"},scopedSlots:e._u([{key:"content-column",fn:function(t){var i=t.formData,n=t.item;return[a("div",{staticClass:"form-handle-slot"},[a("div",{staticClass:"form-handle-slot-title mb4"},[e._v(" 内容 ")]),a("VueUeditorWrap",{attrs:{config:e.myConfig},model:{value:i[n.prop],callback:function(t){e.$set(i,n.prop,t)},expression:"formData[item.prop]"}})],1)]}}])})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"primary-btn small-btn",on:{click:e.sureAdd}},[e._v(" 保存 ")]),a("div",{staticClass:"disabled-btn small-btn ml16",on:{click:function(t){e.addVisible=!1}}},[e._v(" 取消 ")])])]),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:"信息",visible:e.removeVisible,width:"360px",top:"40vh"},on:{"update:visible":function(t){e.removeVisible=t}}},[a("p",[e._v("确认删除此数据?")]),a("div",{staticClass:"dialog-footer ta",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"primary-btn small-btn",on:{click:e.sureRemove}},[e._v(" 确认 ")]),a("div",{staticClass:"disabled-btn small-btn ml16",on:{click:function(t){e.removeVisible=!1}}},[e._v(" 取消 ")])])])],1)}),[],!1,null,null,null);t.default=c.exports},"866f":function(e,t,a){"use strict";var i=a("be57");a.n(i).a},be57:function(e,t,a){},e446:function(e,t,a){"use strict";a.r(t),a("a4d3"),a("4de4"),a("4160"),a("e439"),a("dbb4"),a("b64b"),a("159b");var i=a("2fa7"),n=a("e6b9"),r=(a("13d5"),a("d3b7"),a("ac1f"),a("5319"),a("ddb0"),a("ebdf")),s=r.keys().reduce((function(e,t){var a=t.replace(/^\.\/(.*)\.\w+$/,"$1"),i=r(t).default;return e[a]=i,e}),{});function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}var o={components:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({moduleTags:n.a},s),data:function(){return{active:"info",tags:[{label:"系统公告",value:"info"}]}}},c=a("2877"),u=Object(c.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("moduleTags",{attrs:{tags:e.tags,active:e.active},on:{"update:active":function(t){e.active=t}}}),a(e.active,{tag:"component"})],1)}),[],!1,null,null,null);t.default=u.exports},e6b9:function(e,t,a){"use strict";var i={props:{tags:{type:Array,default:function(e){return[]}},active:{type:String,default:""}},computed:{currentTag:{get:function(){return this.active},set:function(e){this.$emit("update:active",e)}}}},n=(a("866f"),a("2877")),r=Object(n.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tags-view-container",attrs:{id:"tags-view-container"}},e._l(e.tags,(function(t){return a("span",{key:t.value,staticClass:"tags-view-item",class:{active:e.currentTag===t.value},on:{click:function(a){e.currentTag=t.value}}},[e._v(" "+e._s(t.label)+" ")])})),0)}),[],!1,null,"bff73f1c",null);t.a=r.exports},ebdf:function(e,t,a){var i={"./info.vue":"5c99"};function n(e){var t=r(e);return a(t)}function r(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=r,e.exports=n,n.id="ebdf"}}]);